# ๐ ุฑุงูููุง ฺฉุงูู ุฑุงูโุงูุฏุงุฒ ูพุฑูฺู Snabb Taxi System

## ๐ ููุฑุณุช ูุทุงูุจ
1. [ูุนุฑู ูพุฑูฺู](#ูุนุฑู-ูพุฑูฺู)
2. [ูพุดโูุงุฒูุง](#ูพุดโูุงุฒูุง)
3. [ูุตุจ ูุงุจุณุชฺฏโูุง](#ูุตุจ-ูุงุจุณุชฺฏูุง)
4. [ุชูุธูุงุช ูพุงฺฏุงู ุฏุงุฏู](#ุชูุธูุงุช-ูพุงฺฏุงู-ุฏุงุฏู)
5. [ุฑุงูโุงูุฏุงุฒ Backend](#ุฑุงูุงูุฏุงุฒ-backend)
6. [ุฑุงูโุงูุฏุงุฒ Frontend (ูุณุงูุฑ)](#ุฑุงูุงูุฏุงุฒ-frontend-ูุณุงูุฑ)
7. [ุฑุงูโุงูุฏุงุฒ Admin Panel](#ุฑุงูุงูุฏุงุฒ-admin-panel)
8. [ุฑุงูโุงูุฏุงุฒ Driver App](#ุฑุงูุงูุฏุงุฒ-driver-app)
9. [ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุจุง ุงุณฺฉุฑูพุช](#ุงุฌุฑุง-ุฎูุฏฺฉุงุฑ-ุจุง-ุงุณฺฉุฑูพุช)
10. [ุชุณุช ุณุณุชู](#ุชุณุช-ุณุณุชู)
11. [ุฑูุน ูุดฺฉูุงุช](#ุฑูุน-ูุดฺฉูุงุช)

---

## ๐ฏ ูุนุฑู ูพุฑูฺู

**Snabb Taxi System** ฺฉ ุณุณุชู ฺฉุงูู ุชุงฺฉุณโุงุจ ุขููุงู ุงุณุช ฺฉู ุดุงูู:

### ๐ฆ ุงุฌุฒุง ุณุณุชู:

1. **Backend (FastAPI + Python)**
   - ูพูุฑุช: `8001`
   - API ุณุฑูุฑ ุจุง WebSocket
   - MongoDB ุจุฑุง ุฐุฎุฑูโุณุงุฒ
   
2. **Frontend (ุงูพูฺฉุดู ูุณุงูุฑ - React)**
   - ูพูุฑุช: `3000`
   - ุฑุงุจุท ฺฉุงุฑุจุฑ ูุณุงูุฑุงู
   
3. **Admin Panel (ูพูู ูุฏุฑุช - React)**
   - ูพูุฑุช: `3001`
   - ูุฏุฑุช ฺฉุงุฑุจุฑุงูุ ุณูุฑูุง ู ุขูุงุฑ
   
4. **Driver App (ุงูพูฺฉุดู ุฑุงููุฏู - React)**
   - ูพูุฑุช: `3002`
   - ุฑุงุจุท ฺฉุงุฑุจุฑ ุฑุงููุฏฺฏุงู

---

## โ ูพุดโูุงุฒูุง

### ูุฑูโุงูุฒุงุฑูุง ููุฑุฏ ูุงุฒ:

โ๏ธ **Python 3.11+** - ุจุฑุง Backend  
โ๏ธ **Node.js 18+** - ุจุฑุง Frontend ูุง  
โ๏ธ **MongoDB 7.0+** - ุจุฑุง ูพุงฺฏุงู ุฏุงุฏู  
โ๏ธ **Yarn** - ูุฏุฑุช ุจุณุชูโูุง JavaScript  

### ุจุฑุฑุณ ูุตุจ:

```bash
# ุจุฑุฑุณ Python
python --version
# ุฎุฑูุฌ ุจุงุฏ: Python 3.11.x ุง ุจุงูุงุชุฑ

# ุจุฑุฑุณ Node.js
node --version
# ุฎุฑูุฌ ุจุงุฏ: v18.x.x ุง ุจุงูุงุชุฑ

# ุจุฑุฑุณ MongoDB
mongod --version
# ุฎุฑูุฌ ุจุงุฏ: db version v7.0.x

# ุจุฑุฑุณ Yarn
yarn --version
# ุงฺฏุฑ ูุตุจ ูุณุชุ ูุตุจ ฺฉูุฏ:
npm install -g yarn
```

---

## ๐ฆ ูุตุจ ูุงุจุณุชฺฏโูุง

### 1๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง Backend (Python)

```bash
cd snabb/backend
pip install -r requirements.txt
```

**ูฺฉุชู:** ุงฺฏุฑ ุฎุทุง ฺฏุฑูุชุฏุ ุงุฒ virtual environment ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
# ุงุฌุงุฏ virtual environment
python -m venv venv

# ูุนุงู ฺฉุฑุฏู (Windows)
venv\Scripts\activate

# ูุตุจ ูุงุจุณุชฺฏโูุง
pip install -r requirements.txt
```

### 2๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง Frontend (ูุณุงูุฑ)

```bash
cd snabb/frontend
yarn install
```

### 3๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง Admin Panel

```bash
cd snabb/admin
yarn install
```

### 4๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง Driver App

```bash
cd snabb/driver
yarn install
```

---

## ๐๏ธ ุชูุธูุงุช ูพุงฺฏุงู ุฏุงุฏู

### ุฑุงูโุงูุฏุงุฒ MongoDB

1. **ุงุทููุงู ุงุฒ ุงุฌุฑุง MongoDB:**

```bash
# ุฏุฑ Windows: ุจุงุฒ ฺฉุฑุฏู Services ู ุจุฑุฑุณ MongoDB Service
# ุง ุงุฌุฑุง ุฏุณุช:
mongod
```

2. **ุงุฌุงุฏ ุฏุชุงุจุณ (ุงุฎุชุงุฑ):**

MongoDB ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุชุงุจุณ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏุ ุงูุง ูโุชูุงูุฏ ุฏุณุช ูู ุงุฌุงุฏ ฺฉูุฏ:

```bash
# ุงุชุตุงู ุจู MongoDB
mongosh

# ุงุฌุงุฏ ุฏุชุงุจุณ
use snabb_taxi

# ุจุฑุฑุณ ุฏุชุงุจุณ
show dbs
```

### ุชูุธูุงุช Backend Environment

**ูุงู:** `snabb/backend/.env`

ุงฺฏุฑ ูุงู `.env` ูุฌูุฏ ูุฏุงุฑุฏุ ุงุฌุงุฏ ฺฉูุฏ:

```env
MONGO_URL=mongodb://localhost:27017
DB_NAME=snabb_taxi
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002
SECRET_KEY=snabb_secret_key_2025_secure_random_string
```

---

## ๐ง ุฑุงูโุงูุฏุงุฒ Backend

### ุฑูุด 1: ุงุฌุฑุง ุฏุณุช

```bash
cd snabb/backend
uvicorn server:socket_app --host 0.0.0.0 --port 8001 --reload
```

### ุจุฑุฑุณ ุนููฺฉุฑุฏ:

ุจุงุฒ ฺฉุฑุฏู ูุฑูุฑฺฏุฑ ู ุฑูุชู ุจู:
- **API Docs:** http://localhost:8001/docs
- **Health Check:** http://localhost:8001/api/health

ุฎุฑูุฌ ุจุงุฏ ุจุงุดุฏ:
```json
{"status": "healthy", "database": "connected"}
```

### ุงุทูุงุนุงุช ูุฏุฑ ูพุดโูุฑุถ:
- **ุงูู:** admin@snabb.ir
- **ุฑูุฒ ุนุจูุฑ:** admin123

---

## ๐จ ุฑุงูโุงูุฏุงุฒ Frontend (ูุณุงูุฑ)

### ุงุฌุฑุง:

```bash
cd snabb/frontend
yarn start
```

**ุขุฏุฑุณ:** http://localhost:3000

### ูฺฺฏโูุง:
- ุซุจุชโูุงู ู ูุฑูุฏ ูุณุงูุฑ
- ุฏุฑุฎูุงุณุช ุณูุฑ
- ููุงุด ุฑุงููุฏู ุฑู ููุดู
- ุชุงุฑุฎฺู ุณูุฑูุง

---

## ๐จโ๐ผ ุฑุงูโุงูุฏุงุฒ Admin Panel

### ุงุฌุฑุง:

```bash
cd snabb/admin
yarn start
```

**ุขุฏุฑุณ:** http://localhost:3001

### ูุฑูุฏ ุจู ูพูู:
- **ุงูู:** admin@snabb.ir
- **ุฑูุฒ ุนุจูุฑ:** admin123

### ุงูฺฉุงูุงุช:
- ูุฏุฑุช ฺฉุงุฑุจุฑุงู (ุฑุงููุฏฺฏุงู ู ูุณุงูุฑุงู)
- ูุดุงูุฏู ู ูุฏุฑุช ุณูุฑูุง
- ุขูุงุฑ ู ฺฏุฒุงุฑุดุงุช
- ูุฏุฑุช ูุงู
- ุชูุธูุงุช ููุชโฺฏุฐุงุฑ

---

## ๐ ุฑุงูโุงูุฏุงุฒ Driver App

### ุงุฌุฑุง:

```bash
cd snabb/driver
yarn start
```

**ุขุฏุฑุณ:** http://localhost:3002

### ูุฑูุฏ ุฑุงููุฏู:

ุณุณุชู ุงุฒ **Firebase Phone Authentication** ุงุณุชูุงุฏู ูโฺฉูุฏ.

#### ุดูุงุฑูโูุง ุชุณุช:

| ุดูุงุฑู ููุจุงู | ฺฉุฏ ุชุฃุฏ (OTP) |
|--------------|----------------|
| +93 799 123 456 | 123456 |
| +93 799 101 112 | 123456 |
| +93 798 567 909 | 123456 |

**ูุฑุงุญู ูุฑูุฏ:**
1. ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ุชููู
2. ุฑุฏ ฺฉุฑุฏู reCAPTCHA (ุงฺฏุฑ ููุงุด ุฏุงุฏู ุดุฏ)
3. ูุงุฑุฏ ฺฉุฑุฏู ฺฉุฏ OTP: `123456`
4. ูุฑูุฏ ูููู

### ุงูฺฉุงูุงุช:
- ูุดุงูุฏู ุฏุฑุฎูุงุณุชโูุง ุณูุฑ
- ูพุฐุฑุด ุง ุฑุฏ ุณูุฑ
- ุจูโุฑูุฒุฑุณุงู ูููุนุช ูฺฉุงู
- ูุฏุฑุช ุณูุฑูุง ูุนุงู
- ุชุงุฑุฎฺู ุณูุฑูุง
- ูุดุงูุฏู ุฏุฑุขูุฏ ู ฺฉูุณูู

---

## โก ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุจุง ุงุณฺฉุฑูพุช

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช Batch (ุณุงุฏูโุชุฑ)

ูุงู `run-all.bat` ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
# ฺฉูฺฉ ุฏูุจุงุฑ ุฑู ูุงู run-all.bat
# ุง ุงุฒ CMD:
run-all.bat
```

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ PowerShell (ูพุดุฑูุชูโุชุฑ)

```powershell
# ุงุฌุฑุง ุงุณฺฉุฑูพุช PowerShell:
powershell -ExecutionPolicy Bypass -File .\run-all.ps1
```

### ุชูุถุญ ุงุณฺฉุฑูพุชโูุง:

**Batch Script (run-all.bat):**
- ุงุณฺฉุฑูพุช ุณุงุฏู ุจุฑุง ููุฏูุฒ
- 4 ูพูุฌุฑู CMD ุฌุฏุงฺฏุงูู ุจุงุฒ ูโฺฉูุฏ
- ูุฑ ูพูุฌุฑู ฺฉ ุณุฑูุณ ุฑุง ุงุฌุฑุง ูโฺฉูุฏ

**PowerShell Script (run-all.ps1):**
- ูุงุจูุชโูุง ุจุดุชุฑ
- ุฑูฺฏ ู ุฒุจุงุชุฑ
- ุจุฑุฑุณ ูพุดโูุงุฒูุง
- ูุงฺฏโฺฏุฑ ุจูุชุฑ

---

## ๐งช ุชุณุช ุณุณุชู

### 1๏ธโฃ ุชุณุช Backend

```bash
# Health Check
curl http://localhost:8001/api/health

# Admin Stats
curl http://localhost:8001/api/admin/stats

# Test Login (OTP ููุดู 1234 ุงุณุช)
curl -X POST http://localhost:8001/api/auth/login -H "Content-Type: application/json" -d "{\"phone\": \"09121234567\", \"role\": \"passenger\"}"
```

### 2๏ธโฃ ุชุณุช Frontend

1. ุจุงุฒ ฺฉุฑุฏู http://localhost:3000
2. ุซุจุชโูุงู ุจุง ุดูุงุฑู ุชููู (ฺฉุฏ OTP: `1234`)
3. ุฏุฑุฎูุงุณุช ุณูุฑ
4. ูุดุงูุฏู ููุดู

### 3๏ธโฃ ุชุณุช Admin Panel

1. ุจุงุฒ ฺฉุฑุฏู http://localhost:3001
2. ูุฑูุฏ ุจุง:
   - ุงูู: `admin@snabb.ir`
   - ุฑูุฒ: `admin123`
3. ูุดุงูุฏู ุฏุงุดุจูุฑุฏ
4. ูุฏุฑุช ฺฉุงุฑุจุฑุงู

### 4๏ธโฃ ุชุณุช Driver App

1. ุจุงุฒ ฺฉุฑุฏู http://localhost:3002
2. ูุฑูุฏ ุจุง ุดูุงุฑู ุชุณุช: `+93799123456`
3. ูุงุฑุฏ ฺฉุฑุฏู OTP: `123456`
4. ูุดุงูุฏู ุฏุฑุฎูุงุณุชโูุง ุณูุฑ

---

## ๐ฅ ุณูุงุฑู ุชุณุช ฺฉุงูู

### ูุฑุญูู 1: ุฑุงูโุงูุฏุงุฒ ููู ุณุฑูุณโูุง

```bash
# ุงุฌุฑุง ุงุณฺฉุฑูพุช
run-all.bat
```

### ูุฑุญูู 2: ูุฑูุฏ ุฑุงููุฏู

1. http://localhost:3002 โ ูุฑูุฏ ุจุง `+93799123456` โ OTP: `123456`
2. ุฑุงููุฏู ูุงุฑุฏ Dashboard ูโุดูุฏ

### ูุฑุญูู 3: ูุฑูุฏ ูุณุงูุฑ ู ุฏุฑุฎูุงุณุช ุณูุฑ

1. http://localhost:3000 โ ุซุจุชโูุงู ุจุง `09121234567` โ OTP: `1234`
2. ุงูุชุฎุงุจ ูุจุฏุง ู ููุตุฏ ุฑู ููุดู
3. ุฏุฑุฎูุงุณุช ุณูุฑ

### ูุฑุญูู 4: ุฑุงููุฏู ุณูุฑ ุฑุง ูโูพุฐุฑุฏ

1. ุฑุงููุฏู ุฏุฑุฎูุงุณุช ุณูุฑ ุฑุง ุฏุฑ Driver App ูุดุงูุฏู ูโฺฉูุฏ
2. ุฑู "ูุจูู ุณูุฑ" ฺฉูฺฉ ูโฺฉูุฏ
3. ูุณุงูุฑ ุงุทูุงุนุงุช ุฑุงููุฏู ุฑุง ูโุจูุฏ

### ูุฑุญูู 5: ุดุฑูุน ู ุงุชูุงู ุณูุฑ

1. ุฑุงููุฏู ุฑู "ุดุฑูุน ุณูุฑ" ฺฉูฺฉ ูโฺฉูุฏ
2. ุฑุงููุฏู ุฑู "ูพุงุงู ุณูุฑ" ฺฉูฺฉ ูโฺฉูุฏ
3. ุณูุฑ ุชฺฉูู ุดุฏู ู ุฏุฑ ุชุงุฑุฎฺู ุฐุฎุฑู ูโุดูุฏ

### ูุฑุญูู 6: ุจุฑุฑุณ ุฏุฑ Admin Panel

1. http://localhost:3001 โ ูุฑูุฏ ูุฏุฑ
2. ูุดุงูุฏู ุขูุงุฑ ุณูุฑูุง
3. ูุดุงูุฏู ุชุงุฑุฎฺู ฺฉุงูู

---

## ๐ ุฑูุน ูุดฺฉูุงุช

### ูุดฺฉู 1: MongoDB ุงุฌุฑุง ููโุดูุฏ

**ุนูุช:** ุณุฑูุณ MongoDB ูุชููู ุงุณุช

**ุฑุงู ุญู:**

```bash
# Windows: ุจุงุฒ ฺฉุฑุฏู Services
# ุฌุณุชุฌู MongoDB
# ฺฉูฺฉ ุฑุงุณุช โ Start

# ุง ุงุฌุฑุง ุฏุณุช:
mongod --dbpath C:\data\db
```

---

### ูุดฺฉู 2: ูพูุฑุช ุงุดุบุงู ุงุณุช

**ุนูุช:** ูพูุฑุช ูุจูุงู ุงุณุชูุงุฏู ูโุดูุฏ

**ุฑุงู ุญู:**

```bash
# ุจุฑุฑุณ ูพุฑูุณู ุฑู ูพูุฑุช 8001:
netstat -ano | findstr :8001

# kill ฺฉุฑุฏู ูพุฑูุณู:
taskkill /PID <PID> /F
```

---

### ูุดฺฉู 3: Backend ุฎุทุง import ูโุฏูุฏ

**ุนูุช:** ูุงุจุณุชฺฏโูุง ูุตุจ ูุดุฏูโุงูุฏ

**ุฑุงู ุญู:**

```bash
cd snabb/backend
pip install -r requirements.txt
```

---

### ูุดฺฉู 4: Frontend build ููโุดูุฏ

**ุนูุช:** node_modules ูุงูุต ุงุณุช

**ุฑุงู ุญู:**

```bash
cd snabb/frontend
rm -rf node_modules yarn.lock
yarn install
```

---

### ูุดฺฉู 5: Firebase Authentication ฺฉุงุฑ ููโฺฉูุฏ

**ุนูุช:** reCAPTCHA ูุณุฏูุฏ ุดุฏู ุง ฺฉุงููฺฏ ูุงุฏุฑุณุช

**ุฑุงู ุญู:**

1. ุจุฑุฑุณ ุงุชุตุงู ุงูุชุฑูุช
2. ุงุณุชูุงุฏู ุงุฒ ุดูุงุฑูโูุง ุชุณุช Firebase
3. ุจุฑุฑุณ ฺฉุงููฺฏ Firebase ุฏุฑ `driver/src/firebase.js`

---

### ูุดฺฉู 6: WebSocket ูุชุตู ููโุดูุฏ

**ุนูุช:** Backend ุจุง `app` ุจู ุฌุง `socket_app` ุงุฌุฑุง ุดุฏู

**ุฑุงู ุญู:**

```bash
# ุงุณุชูุงุฏู ุงุฒ socket_app:
uvicorn server:socket_app --host 0.0.0.0 --port 8001
```

---

## ๐ ูพูุฑุชโูุง ุงุณุชูุงุฏู ุดุฏู

| ุณุฑูุณ | ูพูุฑุช | ุขุฏุฑุณ |
|--------|------|------|
| Backend | 8001 | http://localhost:8001 |
| Frontend (Passenger) | 3000 | http://localhost:3000 |
| Admin Panel | 3001 | http://localhost:3001 |
| Driver App | 3002 | http://localhost:3002 |
| MongoDB | 27017 | mongodb://localhost:27017 |

---

## ๐ ูุณุชูุฏุงุช ุงุถุงู

- **Backend API:** [backend/API_DOCUMENTATION.md](backend/API_DOCUMENTATION.md)
- **Firebase Auth:** [FIREBASE_AUTH_TESTING.md](FIREBASE_AUTH_TESTING.md)
- **Backend README:** [backend/README.md](backend/README.md)

---

## ๐ฏ ูฺฉุงุช ููู

1. โ ููุดู MongoDB ุฑุง ูุจู ุงุฒ Backend ุงุฌุฑุง ฺฉูุฏ
2. โ Backend ุฑุง ูุจู ุงุฒ Frontend ูุง ุงุฌุฑุง ฺฉูุฏ
3. โ ฺฉุฏ OTP ุจุฑุง ุชุณุช ููุดู `1234` ุงุณุช
4. โ ุดูุงุฑูโูุง ุชุณุช Firebase ุฏุฑ [FIREBASE_AUTH_TESTING.md](FIREBASE_AUTH_TESTING.md)
5. โ ุงุทูุงุนุงุช ูุฑูุฏ ูุฏุฑ: `admin@snabb.ir` / `admin123`

---

## ๐ ุดุฑูุน ุณุฑุน (Quick Start)

```bash
# 1. ุงุฌุฑุง MongoDB (ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฏุฑ ุญุงู ุงุฌุฑุงุณุช)
mongod

# 2. ุงุฌุฑุง ููู ุณุฑูุณโูุง ุจุง ฺฉ ฺฉูฺฉ
run-all.bat

# 3. ุจุงุฒ ฺฉุฑุฏู ูุฑูุฑฺฏุฑูุง:
# - Passenger: http://localhost:3000
# - Admin: http://localhost:3001
# - Driver: http://localhost:3002
# - API Docs: http://localhost:8001/docs
```

---

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏ:
1. ูุงฺฏโูุง Backend ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. Console ูุฑูุฑฺฏุฑ ุฑุง ฺฺฉ ฺฉูุฏ (F12)
3. MongoDB ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. ูพูุฑุชโูุง ุฑุง ฺฺฉ ฺฉูุฏ ฺฉู ุงุดุบุงู ูุจุงุดูุฏ

---

## ๐ ูููู ุจุงุดุฏ!

ุญุงูุง ุดูุง ฺฉ ุณุณุชู ุชุงฺฉุณโุงุจ ฺฉุงูู ุฏุงุฑุฏ ฺฉู ุฑู ุณุณุชู ููฺฉุงู ุดูุง ุงุฌุฑุง ูโุดูุฏ!

**ูุฐุช ุจุจุฑุฏ! ๐๐**
